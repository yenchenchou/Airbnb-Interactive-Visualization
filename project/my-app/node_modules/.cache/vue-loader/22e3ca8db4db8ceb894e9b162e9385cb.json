{"remainingRequest":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-mapbox/src/components/UI/Marker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-mapbox/src/components/UI/Marker.vue","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB3aXRoRXZlbnRzIGZyb20gIi4uLy4uL2xpYi93aXRoRXZlbnRzIjsKaW1wb3J0IHdpdGhTZWxmRXZlbnRzIGZyb20gIi4vd2l0aFNlbGZFdmVudHMiOwoKY29uc3QgbWFya2VyRXZlbnRzID0gewogIGRyYWc6ICJkcmFnIiwKICBkcmFnc3RhcnQ6ICJkcmFnc3RhcnQiLAogIGRyYWdlbmQ6ICJkcmFnZW5kIgp9OwoKY29uc3QgbWFya2VyRE9NRXZlbnRzID0gewogIGNsaWNrOiAiY2xpY2siLAogIG1vdXNlZW50ZXI6ICJtb3VzZWVudGVyIiwKICBtb3VzZWxlYXZlOiAibW91c2VsZWF2ZSIKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFwTWFya2VyIiwKICBtaXhpbnM6IFt3aXRoRXZlbnRzLCB3aXRoU2VsZkV2ZW50c10sCgogIGluamVjdDogWyJtYXBib3giLCAibWFwIl0sCgogIHByb3ZpZGUoKSB7CiAgICBjb25zdCBzZWxmID0gdGhpczsKICAgIHJldHVybiB7CiAgICAgIGdldCBtYXJrZXIoKSB7CiAgICAgICAgcmV0dXJuIHNlbGYubWFya2VyOwogICAgICB9CiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICAvLyBtYXBib3ggbWFya2VyIG9wdGlvbnMKICAgIG9mZnNldDogewogICAgICB0eXBlOiBbT2JqZWN0LCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6ICgpID0+IFswLCAwXQogICAgfSwKICAgIGNvb3JkaW5hdGVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGNvbG9yOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIGFuY2hvcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJjZW50ZXIiCiAgICB9LAogICAgZHJhZ2dhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGluaXRpYWw6IHRydWUsCiAgICAgIG1hcmtlcjogdW5kZWZpbmVkCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICBjb29yZGluYXRlcyhsbmdMYXQpIHsKICAgICAgaWYgKHRoaXMuaW5pdGlhbCkgcmV0dXJuOwogICAgICB0aGlzLm1hcmtlci5zZXRMbmdMYXQobG5nTGF0KTsKICAgIH0sCiAgICBkcmFnZ2FibGUobmV4dCkgewogICAgICBpZiAodGhpcy5pbml0aWFsKSByZXR1cm47CiAgICAgIHRoaXMubWFya2VyLnNldERyYWdnYWJsZShuZXh0KTsKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgY29uc3QgbWFya2VyT3B0aW9ucyA9IHsKICAgICAgLi4udGhpcy4kcHJvcHMKICAgIH07CiAgICBpZiAodGhpcy4kc2xvdHMubWFya2VyKSB7CiAgICAgIG1hcmtlck9wdGlvbnMuZWxlbWVudCA9IHRoaXMuJHNsb3RzLm1hcmtlclswXS5lbG07CiAgICB9CiAgICB0aGlzLm1hcmtlciA9IG5ldyB0aGlzLm1hcGJveC5NYXJrZXIobWFya2VyT3B0aW9ucyk7CgogICAgaWYgKHRoaXMuJGxpc3RlbmVyc1sidXBkYXRlOmNvb3JkaW5hdGVzIl0pIHsKICAgICAgdGhpcy5tYXJrZXIub24oImRyYWdlbmQiLCBldmVudCA9PiB7CiAgICAgICAgbGV0IG5ld0Nvb3JkaW5hdGVzOwogICAgICAgIGlmICh0aGlzLmNvb3JkaW5hdGVzIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIG5ld0Nvb3JkaW5hdGVzID0gW2V2ZW50LnRhcmdldC5fbG5nTGF0LmxuZywgZXZlbnQudGFyZ2V0Ll9sbmdMYXQubGF0XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSBldmVudC50YXJnZXQuX2xuZ0xhdDsKICAgICAgICB9CiAgICAgICAgdGhpcy4kZW1pdCgidXBkYXRlOmNvb3JkaW5hdGVzIiwgbmV3Q29vcmRpbmF0ZXMpOwogICAgICB9KTsKICAgIH0KCiAgICBjb25zdCBldmVudE5hbWVzID0gT2JqZWN0LmtleXMobWFya2VyRXZlbnRzKTsKICAgIHRoaXMuJF9iaW5kU2VsZkV2ZW50cyhldmVudE5hbWVzLCB0aGlzLm1hcmtlcik7CgogICAgdGhpcy5pbml0aWFsID0gZmFsc2U7CiAgICB0aGlzLiRfYWRkTWFya2VyKCk7CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICh0aGlzLm1hcCAhPT0gdW5kZWZpbmVkICYmIHRoaXMubWFya2VyICE9PSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy5tYXJrZXIucmVtb3ZlKCk7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgJF9hZGRNYXJrZXIoKSB7CiAgICAgIHRoaXMubWFya2VyLnNldExuZ0xhdCh0aGlzLmNvb3JkaW5hdGVzKS5hZGRUbyh0aGlzLm1hcCk7CiAgICAgIHRoaXMuJF9iaW5kTWFya2VyRE9NRXZlbnRzKCk7CiAgICAgIHRoaXMuJF9lbWl0RXZlbnQoImFkZGVkIiwgeyBtYXJrZXI6IHRoaXMubWFya2VyIH0pOwogICAgfSwKCiAgICAkX2VtaXRTZWxmRXZlbnQoZXZlbnQpIHsKICAgICAgdGhpcy4kX2VtaXRNYXBFdmVudChldmVudCwgeyBtYXJrZXI6IHRoaXMubWFya2VyIH0pOwogICAgfSwKCiAgICAkX2JpbmRNYXJrZXJET01FdmVudHMoKSB7CiAgICAgIE9iamVjdC5rZXlzKHRoaXMuJGxpc3RlbmVycykuZm9yRWFjaChrZXkgPT4gewogICAgICAgIGlmIChPYmplY3QudmFsdWVzKG1hcmtlckRPTUV2ZW50cykuaW5jbHVkZXMoa2V5KSkgewogICAgICAgICAgdGhpcy5tYXJrZXIuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihrZXksIGV2ZW50ID0+IHsKICAgICAgICAgICAgdGhpcy4kX2VtaXRTZWxmRXZlbnQoZXZlbnQpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgcmVtb3ZlKCkgewogICAgICB0aGlzLm1hcmtlci5yZW1vdmUoKTsKICAgICAgdGhpcy4kX2VtaXRFdmVudCgicmVtb3ZlZCIpOwogICAgfSwKCiAgICB0b2dnbGVQb3B1cCgpIHsKICAgICAgcmV0dXJuIHRoaXMubWFya2VyLnRvZ2dsZVBvcHVwKCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Marker.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Marker.vue","sourceRoot":"node_modules/vue-mapbox/src/components/UI","sourcesContent":["<template>\n  <div style=\"display: none\">\n    <!-- slot for custom marker -->\n    <slot name=\"marker\" />\n    <!-- slot for popup -->\n    <slot v-if=\"marker\" />\n  </div>\n</template>\n\n<script>\nimport withEvents from \"../../lib/withEvents\";\nimport withSelfEvents from \"./withSelfEvents\";\n\nconst markerEvents = {\n  drag: \"drag\",\n  dragstart: \"dragstart\",\n  dragend: \"dragend\"\n};\n\nconst markerDOMEvents = {\n  click: \"click\",\n  mouseenter: \"mouseenter\",\n  mouseleave: \"mouseleave\"\n};\n\nexport default {\n  name: \"MapMarker\",\n  mixins: [withEvents, withSelfEvents],\n\n  inject: [\"mapbox\", \"map\"],\n\n  provide() {\n    const self = this;\n    return {\n      get marker() {\n        return self.marker;\n      }\n    };\n  },\n\n  props: {\n    // mapbox marker options\n    offset: {\n      type: [Object, Array],\n      default: () => [0, 0]\n    },\n    coordinates: {\n      type: Array,\n      required: true\n    },\n    color: {\n      type: String\n    },\n    anchor: {\n      type: String,\n      default: \"center\"\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      initial: true,\n      marker: undefined\n    };\n  },\n\n  watch: {\n    coordinates(lngLat) {\n      if (this.initial) return;\n      this.marker.setLngLat(lngLat);\n    },\n    draggable(next) {\n      if (this.initial) return;\n      this.marker.setDraggable(next);\n    }\n  },\n\n  mounted() {\n    const markerOptions = {\n      ...this.$props\n    };\n    if (this.$slots.marker) {\n      markerOptions.element = this.$slots.marker[0].elm;\n    }\n    this.marker = new this.mapbox.Marker(markerOptions);\n\n    if (this.$listeners[\"update:coordinates\"]) {\n      this.marker.on(\"dragend\", event => {\n        let newCoordinates;\n        if (this.coordinates instanceof Array) {\n          newCoordinates = [event.target._lngLat.lng, event.target._lngLat.lat];\n        } else {\n          newCoordinates = event.target._lngLat;\n        }\n        this.$emit(\"update:coordinates\", newCoordinates);\n      });\n    }\n\n    const eventNames = Object.keys(markerEvents);\n    this.$_bindSelfEvents(eventNames, this.marker);\n\n    this.initial = false;\n    this.$_addMarker();\n  },\n\n  beforeDestroy() {\n    if (this.map !== undefined && this.marker !== undefined) {\n      this.marker.remove();\n    }\n  },\n\n  methods: {\n    $_addMarker() {\n      this.marker.setLngLat(this.coordinates).addTo(this.map);\n      this.$_bindMarkerDOMEvents();\n      this.$_emitEvent(\"added\", { marker: this.marker });\n    },\n\n    $_emitSelfEvent(event) {\n      this.$_emitMapEvent(event, { marker: this.marker });\n    },\n\n    $_bindMarkerDOMEvents() {\n      Object.keys(this.$listeners).forEach(key => {\n        if (Object.values(markerDOMEvents).includes(key)) {\n          this.marker._element.addEventListener(key, event => {\n            this.$_emitSelfEvent(event);\n          });\n        }\n      });\n    },\n\n    remove() {\n      this.marker.remove();\n      this.$_emitEvent(\"removed\");\n    },\n\n    togglePopup() {\n      return this.marker.togglePopup();\n    }\n  }\n};\n</script>\n"]}]}