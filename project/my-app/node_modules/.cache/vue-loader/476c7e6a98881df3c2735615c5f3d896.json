{"remainingRequest":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-mapbox/src/components/UI/Popup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-mapbox/src/components/UI/Popup.vue","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weifanchen/Documents/GitHub/a5-undefined/project/my-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB3aXRoRXZlbnRzIGZyb20gIi4uLy4uL2xpYi93aXRoRXZlbnRzIjsKaW1wb3J0IHdpdGhTZWxmRXZlbnRzIGZyb20gIi4vd2l0aFNlbGZFdmVudHMiOwoKY29uc3QgcG9wdXBFdmVudHMgPSB7CiAgb3BlbjogIm9wZW4iLAogIGNsb3NlOiAiY2xvc2UiCn07CgovKioKICogUG9wdXAgY29tcG9uZW50LgogKiBAc2VlIFNlZSBbTWFwYm94IEdsIEpTIFBvcHVwXShodHRwczovL3d3dy5tYXBib3guY29tL21hcGJveC1nbC1qcy9hcGkvI3BvcHVwKQogKi8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQb3B1cCIsCiAgbWl4aW5zOiBbd2l0aEV2ZW50cywgd2l0aFNlbGZFdmVudHNdLAoKICBpbmplY3Q6IHsKICAgIG1hcGJveDogewogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgbWFwOiB7CiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBtYXJrZXI6IHsKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCgogIHByb3BzOiB7CiAgICAvKioKICAgICAqIElmIGB0cnVlYCwgYSBjbG9zZSBidXR0b24gd2lsbCBhcHBlYXIgaW4gdGhlIHRvcCByaWdodCBjb3JuZXIgb2YgdGhlIHBvcHVwLgogICAgICogTWFwYm94IEdMIHBvcHVwIG9wdGlvbi4KICAgICAqLwogICAgY2xvc2VCdXR0b246IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIC8qKgogICAgICogTWFwYm94IEdMIHBvcHVwIG9wdGlvbi4KICAgICAqIElmIGB0cnVlYCwgdGhlIHBvcHVwIHdpbGwgY2xvc2VkIHdoZW4gdGhlIG1hcCBpcyBjbGlja2VkLiAuCiAgICAgKi8KICAgIGNsb3NlT25DbGljazogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLyoqCiAgICAgKiBNYXBib3ggR0wgcG9wdXAgb3B0aW9uLgogICAgICogQSBzdHJpbmcgaW5kaWNhdGluZyB0aGUgcG9wdXAncyBsb2NhdGlvbiByZWxhdGl2ZSB0byB0aGUgY29vcmRpbmF0ZSBzZXQuCiAgICAgKiBJZiB1bnNldCB0aGUgYW5jaG9yIHdpbGwgYmUgZHluYW1pY2FsbHkgc2V0IHRvIGVuc3VyZSB0aGUgcG9wdXAgZmFsbHMgd2l0aGluIHRoZSBtYXAgY29udGFpbmVyIHdpdGggYSBwcmVmZXJlbmNlIGZvciAnYm90dG9tJyAuCiAgICAgKiAgJ3RvcCcsICdib3R0b20nLCAnbGVmdCcsICdyaWdodCcsICd0b3AtbGVmdCcsICd0b3AtcmlnaHQnLCAnYm90dG9tLWxlZnQnLCAnYm90dG9tLXJpZ2h0JwogICAgICovCiAgICBhbmNob3I6IHsKICAgICAgdmFsaWRhdG9yKHZhbHVlKSB7CiAgICAgICAgbGV0IGFsbG93ZWRWYWx1ZXMgPSBbCiAgICAgICAgICAidG9wIiwKICAgICAgICAgICJib3R0b20iLAogICAgICAgICAgImxlZnQiLAogICAgICAgICAgInJpZ2h0IiwKICAgICAgICAgICJ0b3AtbGVmdCIsCiAgICAgICAgICAidG9wLXJpZ2h0IiwKICAgICAgICAgICJib3R0b20tbGVmdCIsCiAgICAgICAgICAiYm90dG9tLXJpZ2h0IgogICAgICAgIF07CiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgYWxsb3dlZFZhbHVlcy5pbmNsdWRlcyh2YWx1ZSk7CiAgICAgIH0sCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIC8qKgogICAgICogTWFwYm94IEdMIHBvcHVwIG9wdGlvbi4KICAgICAqIEEgcGl4ZWwgb2Zmc2V0IGFwcGxpZWQgdG8gdGhlIHBvcHVwJ3MgbG9jYXRpb24KICAgICAqIGEgc2luZ2xlIG51bWJlciBzcGVjaWZ5aW5nIGEgZGlzdGFuY2UgZnJvbSB0aGUgcG9wdXAncyBsb2NhdGlvbgogICAgICogYSBQb2ludExpa2Ugc3BlY2lmeWluZyBhIGNvbnN0YW50IG9mZnNldAogICAgICogYW4gb2JqZWN0IG9mIFBvaW50cyBzcGVjaWZpbmcgYW4gb2Zmc2V0IGZvciBlYWNoIGFuY2hvciBwb3NpdGlvbiBOZWdhdGl2ZSBvZmZzZXRzIGluZGljYXRlIGxlZnQgYW5kIHVwLgogICAgICovCiAgICBvZmZzZXQ6IHsKICAgICAgdHlwZTogW051bWJlciwgT2JqZWN0LCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6ICgpID0+IFswLCAwXQogICAgfSwKICAgIGNvb3JkaW5hdGVzOiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9LAoKICAgIC8qKgogICAgICogQ29tcG9uZW50IG9wdGlvbi4KICAgICAqIElmIGB0cnVlYCwgcG9wdXAgdHJlYXRzIGRhdGEgaW4gZGVhZnVsdCBzbG90IGFzIHBsYWluIHRleHQKICAgICAqLwogICAgb25seVRleHQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgc2hvd2VkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGluaXRpYWw6IHRydWUsCiAgICAgIHBvcHVwOiB1bmRlZmluZWQKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIG9wZW46IHsKICAgICAgZ2V0KCkgewogICAgICAgIGlmICh0aGlzLnBvcHVwICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnBvcHVwLmlzT3BlbigpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0sCiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLm1hcCAmJiB0aGlzLnBvcHVwKSB7CiAgICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5wb3B1cC5yZW1vdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucG9wdXAuYWRkVG8odGhpcy5tYXApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBjb29yZGluYXRlcyhsbmdMYXQpIHsKICAgICAgaWYgKHRoaXMuaW5pdGlhbCkgcmV0dXJuOwogICAgICB0aGlzLnBvcHVwLnNldExuZ0xhdChsbmdMYXQpOwogICAgfSwKCiAgICBzaG93ZWQobmV4dCwgcHJldikgewogICAgICBpZiAobmV4dCAhPT0gcHJldikgewogICAgICAgIHRoaXMub3BlbiA9IG5leHQ7CiAgICAgICAgaWYgKHRoaXMubWFya2VyKSB7CiAgICAgICAgICB0aGlzLm1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnBvcHVwID0gbmV3IHRoaXMubWFwYm94LlBvcHVwKHRoaXMuJHByb3BzKTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy4kX2FkZFBvcHVwKCk7CiAgICB0aGlzLmluaXRpYWwgPSBmYWxzZTsKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMubWFwKSB7CiAgICAgIHRoaXMucG9wdXAucmVtb3ZlKCk7CiAgICAgIHRoaXMuJF9lbWl0RXZlbnQoInJlbW92ZWQiKTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICAkX2FkZFBvcHVwKCkgewogICAgICB0aGlzLnBvcHVwID0gbmV3IHRoaXMubWFwYm94LlBvcHVwKHRoaXMuJHByb3BzKTsKICAgICAgaWYgKHRoaXMuY29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMucG9wdXAuc2V0TG5nTGF0KHRoaXMuY29vcmRpbmF0ZXMpOwogICAgICB9CiAgICAgIGlmICh0aGlzLiRzbG90cy5kZWZhdWx0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAodGhpcy5vbmx5VGV4dCkgewogICAgICAgICAgaWYgKHRoaXMuJHNsb3RzLmRlZmF1bHRbMF0uZWxtLm5vZGVUeXBlID09PSAzKSB7CiAgICAgICAgICAgIGxldCB0bXBFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICAgICAgdG1wRWwuYXBwZW5kQ2hpbGQodGhpcy4kc2xvdHMuZGVmYXVsdFswXS5lbG0pOwogICAgICAgICAgICB0aGlzLnBvcHVwLnNldFRleHQodG1wRWwuaW5uZXJUZXh0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucG9wdXAuc2V0VGV4dCh0aGlzLiRzbG90cy5kZWZhdWx0WzBdLmVsbS5pbm5lclRleHQpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBvcHVwLnNldERPTUNvbnRlbnQodGhpcy4kc2xvdHMuZGVmYXVsdFswXS5lbG0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy4kX2JpbmRTZWxmRXZlbnRzKE9iamVjdC5rZXlzKHBvcHVwRXZlbnRzKSwgdGhpcy5wb3B1cCk7CgogICAgICB0aGlzLiRfZW1pdEV2ZW50KCJhZGRlZCIsIHsgcG9wdXA6IHRoaXMucG9wdXAgfSk7CgogICAgICBpZiAodGhpcy5tYXJrZXIpIHsKICAgICAgICB0aGlzLm1hcmtlci5zZXRQb3B1cCh0aGlzLnBvcHVwKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zaG93ZWQpIHsKICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOwoKICAgICAgICBpZiAodGhpcy5tYXJrZXIpIHsKICAgICAgICAgIHRoaXMubWFya2VyLnRvZ2dsZVBvcHVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgICRfZW1pdFNlbGZFdmVudChldmVudCkgewogICAgICB0aGlzLiRfZW1pdE1hcEV2ZW50KGV2ZW50LCB7IHBvcHVwOiB0aGlzLnBvcHVwIH0pOwogICAgfSwKCiAgICByZW1vdmUoKSB7CiAgICAgIHRoaXMucG9wdXAucmVtb3ZlKCk7CiAgICAgIHRoaXMuJF9lbWl0RXZlbnQoInJlbW92ZSIsIHsgcG9wdXA6IHRoaXMucG9wdXAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Popup.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Popup.vue","sourceRoot":"node_modules/vue-mapbox/src/components/UI","sourcesContent":["<template>\n  <div style=\"display: none\">\n    <!-- @slot Slot for popup content -->\n    <slot />\n  </div>\n</template>\n\n<script>\nimport withEvents from \"../../lib/withEvents\";\nimport withSelfEvents from \"./withSelfEvents\";\n\nconst popupEvents = {\n  open: \"open\",\n  close: \"close\"\n};\n\n/**\n * Popup component.\n * @see See [Mapbox Gl JS Popup](https://www.mapbox.com/mapbox-gl-js/api/#popup)\n */\nexport default {\n  name: \"Popup\",\n  mixins: [withEvents, withSelfEvents],\n\n  inject: {\n    mapbox: {\n      default: null\n    },\n    map: {\n      default: null\n    },\n    marker: {\n      default: null\n    }\n  },\n\n  props: {\n    /**\n     * If `true`, a close button will appear in the top right corner of the popup.\n     * Mapbox GL popup option.\n     */\n    closeButton: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * Mapbox GL popup option.\n     * If `true`, the popup will closed when the map is clicked. .\n     */\n    closeOnClick: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * Mapbox GL popup option.\n     * A string indicating the popup's location relative to the coordinate set.\n     * If unset the anchor will be dynamically set to ensure the popup falls within the map container with a preference for 'bottom' .\n     *  'top', 'bottom', 'left', 'right', 'top-left', 'top-right', 'bottom-left', 'bottom-right'\n     */\n    anchor: {\n      validator(value) {\n        let allowedValues = [\n          \"top\",\n          \"bottom\",\n          \"left\",\n          \"right\",\n          \"top-left\",\n          \"top-right\",\n          \"bottom-left\",\n          \"bottom-right\"\n        ];\n        return typeof value === \"string\" && allowedValues.includes(value);\n      },\n      default: undefined\n    },\n    /**\n     * Mapbox GL popup option.\n     * A pixel offset applied to the popup's location\n     * a single number specifying a distance from the popup's location\n     * a PointLike specifying a constant offset\n     * an object of Points specifing an offset for each anchor position Negative offsets indicate left and up.\n     */\n    offset: {\n      type: [Number, Object, Array],\n      default: () => [0, 0]\n    },\n    coordinates: {\n      type: Array\n    },\n\n    /**\n     * Component option.\n     * If `true`, popup treats data in deafult slot as plain text\n     */\n    onlyText: {\n      type: Boolean,\n      default: false\n    },\n\n    showed: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      initial: true,\n      popup: undefined\n    };\n  },\n\n  computed: {\n    open: {\n      get() {\n        if (this.popup !== undefined) {\n          return this.popup.isOpen();\n        }\n        return false;\n      },\n      set(value) {\n        if (this.map && this.popup) {\n          if (value) {\n            this.popup.remove();\n          } else {\n            this.popup.addTo(this.map);\n          }\n        }\n      }\n    }\n  },\n\n  watch: {\n    coordinates(lngLat) {\n      if (this.initial) return;\n      this.popup.setLngLat(lngLat);\n    },\n\n    showed(next, prev) {\n      if (next !== prev) {\n        this.open = next;\n        if (this.marker) {\n          this.marker.togglePopup();\n        }\n      }\n    }\n  },\n\n  created() {\n    this.popup = new this.mapbox.Popup(this.$props);\n  },\n\n  mounted() {\n    this.$_addPopup();\n    this.initial = false;\n  },\n\n  beforeDestroy() {\n    if (this.map) {\n      this.popup.remove();\n      this.$_emitEvent(\"removed\");\n    }\n  },\n\n  methods: {\n    $_addPopup() {\n      this.popup = new this.mapbox.Popup(this.$props);\n      if (this.coordinates !== undefined) {\n        this.popup.setLngLat(this.coordinates);\n      }\n      if (this.$slots.default !== undefined) {\n        if (this.onlyText) {\n          if (this.$slots.default[0].elm.nodeType === 3) {\n            let tmpEl = document.createElement(\"span\");\n            tmpEl.appendChild(this.$slots.default[0].elm);\n            this.popup.setText(tmpEl.innerText);\n          } else {\n            this.popup.setText(this.$slots.default[0].elm.innerText);\n          }\n        } else {\n          this.popup.setDOMContent(this.$slots.default[0].elm);\n        }\n      }\n\n      this.$_bindSelfEvents(Object.keys(popupEvents), this.popup);\n\n      this.$_emitEvent(\"added\", { popup: this.popup });\n\n      if (this.marker) {\n        this.marker.setPopup(this.popup);\n      }\n      if (this.showed) {\n        this.open = true;\n\n        if (this.marker) {\n          this.marker.togglePopup();\n        }\n      }\n    },\n\n    $_emitSelfEvent(event) {\n      this.$_emitMapEvent(event, { popup: this.popup });\n    },\n\n    remove() {\n      this.popup.remove();\n      this.$_emitEvent(\"remove\", { popup: this.popup });\n    }\n  }\n};\n</script>\n"]}]}